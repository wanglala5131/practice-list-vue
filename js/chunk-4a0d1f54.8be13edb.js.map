{"version":3,"sources":["webpack:///./src/components/Subcategories.vue?0eb4","webpack:///./src/components/Subcategories.vue?f291","webpack:///src/components/Subcategories.vue","webpack:///./src/components/Subcategories.vue?7d16","webpack:///./src/components/Subcategories.vue?a1fd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","isLoading","on","$event","_v","domProps","type","indexOf","_k","keyCode","key","addItem","target","composing","newName","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","newCategory","multiple","_l","category","id","_s","isProcessing","stopPropagation","preventDefault","_m","subcategory","class","editing","editingItem","editItem","submitItem","blur","$set","isChangeable","Items","changeCategory","_e","deleteItem","staticRenderFns","data","subcategories","categories","editOriName","temEditingName","temEditCategory","created","fetchSubcategories","methods","items","length","item","el","focus","component"],"mappings":"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","file":"js/chunk-4a0d1f54.8be13edb.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Subcategories.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Subcategories.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',[_c('div',{staticClass:\"setting-add-area\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoading),expression:\"isLoading\"}]},[_c('loading',{attrs:{\"id\":\"loading-box\",\"active\":_vm.isLoading,\"can-cancel\":true},on:{\"update:active\":function($event){_vm.isLoading=$event}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}],staticClass:\"container\"},[_c('h2',[_vm._v(\"新增項目類型\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newName),expression:\"newName\"}],attrs:{\"type\":\"text\",\"placeholder\":\"填入類型名稱\"},domProps:{\"value\":(_vm.newName)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addItem($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.newName=$event.target.value}}}),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newCategory),expression:\"newCategory\"}],attrs:{\"name\":\"add-select\",\"id\":\"add-select\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.newCategory=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"-1\",\"hidden\":\"\"}},[_vm._v(\"選擇運動類別\")]),_vm._l((_vm.categories),function(category){return _c('option',{key:category.id,domProps:{\"value\":category.id}},[_vm._v(_vm._s(category.name))])})],2),_c('button',{attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addItem($event)}}},[_vm._v(\" \"+_vm._s(_vm.isProcessing ? '新增中' : '新增')+\" \")])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}],staticClass:\"setting-table\"},[_c('div',{staticClass:\"container\"},[_vm._m(0),_vm._l((_vm.subcategories),function(subcategory){return _c('div',{key:subcategory.id,staticClass:\"setting-item\"},[_c('div',{staticClass:\"setting-item-text\",class:{ editing: _vm.editingItem.id === subcategory.id }},[_c('p',{on:{\"dblclick\":function($event){return _vm.editItem(subcategory)}}},[_vm._v(_vm._s(subcategory.name))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editingItem.name),expression:\"editingItem.name\"},{name:\"input-focus\",rawName:\"v-input-focus\",value:(_vm.editingItem.id === subcategory.id),expression:\"editingItem.id === subcategory.id\"}],attrs:{\"type\":\"text\",\"name\":\"subcategory\"},domProps:{\"value\":(_vm.editingItem.name)},on:{\"blur\":function($event){return _vm.submitItem()},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return $event.target.blur($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.editingItem, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"setting-item-category\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(subcategory.CategoryId),expression:\"subcategory.CategoryId\"}],attrs:{\"name\":\"edit-select\",\"id\":\"edit-select\",\"disabled\":_vm.isChangeable(subcategory.Items)},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(subcategory, \"CategoryId\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){return _vm.changeCategory(subcategory)}]}},_vm._l((_vm.categories),function(category){return _c('option',{key:category.id,domProps:{\"value\":category.id}},[_vm._v(_vm._s(category.name))])}),0)]),_c('div',{staticClass:\"setting-item-buttons\"},[(!_vm.isChangeable(subcategory.Items))?_c('button',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteItem(subcategory)}}},[_vm._v(\" × \")]):_vm._e()])])})],2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setting-table-title\"},[_c('h2',[_vm._v(\" 目前的項目類型 \")]),_c('span',{staticClass:\"setting-table-remind\"},[_vm._v(\"點兩下可編輯名稱，若尚有項目正在使用，則無法改變運動類別與刪除 \")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <main>\r\n    <div class=\"setting-add-area\">\r\n      <div v-show=\"isLoading\">\r\n        <loading\r\n          id=\"loading-box\"\r\n          :active.sync=\"isLoading\"\r\n          :can-cancel=\"true\"\r\n        ></loading>\r\n      </div>\r\n      <div class=\"container\" v-show=\"!isLoading\">\r\n        <h2>新增項目類型</h2>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"填入類型名稱\"\r\n          v-model=\"newName\"\r\n          @keyup.enter=\"addItem\"\r\n        />\r\n        <select name=\"add-select\" id=\"add-select\" v-model=\"newCategory\">\r\n          <option value=\"-1\" hidden>選擇運動類別</option>\r\n          <option\r\n            :value=\"category.id\"\r\n            v-for=\"category in categories\"\r\n            :key=\"category.id\"\r\n            >{{ category.name }}</option\r\n          >\r\n        </select>\r\n        <button @click.stop.prevent=\"addItem\" :disabled=\"isProcessing\">\r\n          {{ isProcessing ? '新增中' : '新增' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"setting-table\" v-show=\"!isLoading\">\r\n      <div class=\"container\">\r\n        <div class=\"setting-table-title\">\r\n          <h2>\r\n            目前的項目類型\r\n          </h2>\r\n          <span class=\"setting-table-remind\"\r\n            >點兩下可編輯名稱，若尚有項目正在使用，則無法改變運動類別與刪除\r\n          </span>\r\n        </div>\r\n        <div\r\n          class=\"setting-item\"\r\n          v-for=\"subcategory in subcategories\"\r\n          :key=\"subcategory.id\"\r\n        >\r\n          <div\r\n            class=\"setting-item-text\"\r\n            :class=\"{ editing: editingItem.id === subcategory.id }\"\r\n          >\r\n            <p @dblclick=\"editItem(subcategory)\">{{ subcategory.name }}</p>\r\n            <input\r\n              type=\"text\"\r\n              name=\"subcategory\"\r\n              v-model=\"editingItem.name\"\r\n              @blur=\"submitItem()\"\r\n              @keyup.enter=\"$event.target.blur\"\r\n              v-input-focus=\"editingItem.id === subcategory.id\"\r\n            />\r\n          </div>\r\n          <div class=\"setting-item-category\">\r\n            <select\r\n              name=\"edit-select\"\r\n              id=\"edit-select\"\r\n              v-model=\"subcategory.CategoryId\"\r\n              @change=\"changeCategory(subcategory)\"\r\n              :disabled=\"isChangeable(subcategory.Items)\"\r\n            >\r\n              <option\r\n                :value=\"category.id\"\r\n                v-for=\"category in categories\"\r\n                :key=\"category.id\"\r\n                >{{ category.name }}</option\r\n              >\r\n            </select>\r\n          </div>\r\n          <div class=\"setting-item-buttons\">\r\n            <button\r\n              @click.stop.prevent=\"deleteItem(subcategory)\"\r\n              v-if=\"!isChangeable(subcategory.Items)\"\r\n            >\r\n              &times;\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport settingAPI from '../apis/setting'\r\nimport { Toast, Confirm } from '../utils/helpers'\r\nexport default {\r\n  name: 'subcategories',\r\n  data() {\r\n    return {\r\n      newName: '',\r\n      newCategory: -1,\r\n      subcategories: [],\r\n      categories: [],\r\n      editingItem: {},\r\n      editOriName: '',\r\n      temEditingName: '',\r\n      temEditCategory: -1,\r\n      isProcessing: false,\r\n      isLoading: true\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchSubcategories()\r\n  },\r\n  methods: {\r\n    async fetchSubcategories() {\r\n      try {\r\n        const { data, statusText } = await settingAPI.getSubcategory()\r\n        if (statusText !== 'OK') {\r\n          throw new Error()\r\n        }\r\n        this.subcategories = data.subcategories.map(subcategory => ({\r\n          ...subcategory,\r\n          oriCategoryId: subcategory.CategoryId\r\n        }))\r\n        this.categories = data.categories\r\n        this.isLoading = false\r\n      } catch (err) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '目前無法取得資料，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    isChangeable(items) {\r\n      if (items.length > 0) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    editItem(item) {\r\n      this.editingItem = { ...item }\r\n      this.temEditingName = item.name\r\n    },\r\n    async submitItem() {\r\n      try {\r\n        if (this.editingItem.name !== this.temEditingName) {\r\n          if (!this.editingItem.name) {\r\n            Toast.fire({\r\n              icon: 'error',\r\n              title: '名稱不可空白'\r\n            })\r\n            return\r\n          }\r\n          const value = { name: this.editingItem.name }\r\n          const { data, statusText } = await settingAPI.putSubcategory({\r\n            value,\r\n            id: this.editingItem.id\r\n          })\r\n          if (statusText !== 'OK') {\r\n            throw new Error()\r\n          }\r\n          if (data.status === 'error') {\r\n            Toast.fire({\r\n              icon: 'error',\r\n              title: data.message\r\n            })\r\n            return\r\n          }\r\n          this.subcategories = this.subcategories.map(subcategory => {\r\n            if (subcategory.id === this.editingItem.id) {\r\n              return this.editingItem\r\n            }\r\n            return subcategory\r\n          })\r\n          Toast.fire({\r\n            icon: 'success',\r\n            title: '成功修改名稱'\r\n          })\r\n        }\r\n        this.editingItem = {}\r\n      } catch (err) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '目前無法修改名稱，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async changeCategory(item) {\r\n      try {\r\n        if (item.Items.length > 0) {\r\n          for (let subcategory of this.subcategories) {\r\n            if (subcategory.id === item.id) {\r\n              subcategory.CategoryId = subcategory.oriCategoryId\r\n            }\r\n          }\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: '此類型仍有項目正在使用，無法修改運動類別唷！'\r\n          })\r\n          return\r\n        }\r\n        const value = { CategoryId: item.CategoryId }\r\n        const { data, statusText } = await settingAPI.putSubcategory({\r\n          value,\r\n          id: item.id\r\n        })\r\n        if (statusText !== 'OK') {\r\n          throw new Error()\r\n        }\r\n        if (data.status === 'error') {\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: data.message\r\n          })\r\n          return\r\n        }\r\n        Toast.fire({\r\n          icon: 'success',\r\n          title: '成功修改運動類別'\r\n        })\r\n      } catch (err) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '目前無法修改運動類別，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async deleteItem(item) {\r\n      try {\r\n        if (item.Items.length > 0) {\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: '此類型尚有項目正在使用，無法刪除'\r\n          })\r\n        }\r\n        const result = await Confirm.fire({\r\n          title: `確定要刪除「${item.name}」嗎？`,\r\n          confirmButtonText: `刪除`\r\n        })\r\n        if (result.isConfirmed) {\r\n          const { data, statusText } = await settingAPI.deleteSubcategory({\r\n            id: item.id\r\n          })\r\n          if (statusText !== 'OK') {\r\n            throw new Error()\r\n          }\r\n          if (data.status === 'error') {\r\n            Toast.fire({\r\n              icon: 'error',\r\n              title: data.message\r\n            })\r\n            return\r\n          }\r\n          this.subcategories = this.subcategories.filter(\r\n            subcategory => subcategory.id !== item.id\r\n          )\r\n          Toast.fire({\r\n            icon: 'success',\r\n            title: '成功刪除項目類別'\r\n          })\r\n        }\r\n      } catch (err) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '目前無法刪除此項目類型，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async addItem() {\r\n      try {\r\n        if (!this.newName || this.newCategory < 0) {\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: '請填入名稱與選擇運動類型'\r\n          })\r\n          return\r\n        }\r\n        const name = this.newName\r\n        const CategoryId = this.newCategory\r\n        this.isProcessing = true\r\n        const { data, statusText } = await settingAPI.addSubcategory({\r\n          name,\r\n          CategoryId\r\n        })\r\n        if (statusText !== 'OK') {\r\n          throw new Error()\r\n        }\r\n        if (data.status === 'error') {\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: data.message\r\n          })\r\n          return\r\n        }\r\n        this.subcategories.push({ ...data, Items: [] })\r\n        Toast.fire({\r\n          icon: 'success',\r\n          title: '成功新增項目類別'\r\n        })\r\n        this.newName = ''\r\n        this.newCategory = -1\r\n        this.isProcessing = false\r\n      } catch (err) {\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '目前無法新增項目類型，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  },\r\n  directives: {\r\n    'input-focus': function(el) {\r\n      el.focus()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.setting-add-area {\r\n  margin: 0 auto;\r\n  padding: 30px 0 20px 0;\r\n  max-width: 800px;\r\n  h2 {\r\n    margin-bottom: 20px;\r\n  }\r\n  input {\r\n    @extend .input-style;\r\n    width: 100%;\r\n    margin-bottom: 10px;\r\n    padding-top: 5px; //對齊旁邊的select\r\n  }\r\n  select {\r\n    @extend .input-style;\r\n    margin: 10px 10px 0 0px;\r\n  }\r\n  button {\r\n    @extend .button-style;\r\n    margin-top: 10px;\r\n    border: 2px solid $white;\r\n    background-color: $gray;\r\n    color: $dark-gray;\r\n    cursor: pointer;\r\n    &:hover {\r\n      border: 2px solid $dark-gray;\r\n    }\r\n    &:disabled {\r\n      background-color: $light-gray;\r\n      color: $gray;\r\n      &:hover {\r\n        border: 2px solid $white;\r\n      }\r\n    }\r\n  }\r\n}\r\n.setting-table {\r\n  margin: 0 auto 50px auto;\r\n  padding: 20px 0 40px 0;\r\n  max-width: 800px;\r\n  .setting-table-title {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    align-items: baseline;\r\n  }\r\n  .setting-table-remind {\r\n    display: inline-block;\r\n    padding: 5px;\r\n    font-size: 1.2rem;\r\n    color: $dark-gray;\r\n  }\r\n  .setting-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0px 30px;\r\n    margin: 10px 0;\r\n    background-color: $light-logo-green;\r\n    border-radius: 20px;\r\n    .setting-item-text {\r\n      flex-basis: 80%;\r\n      font-size: 1.4rem;\r\n      p {\r\n        padding: 0 7px 2px 0;\r\n      }\r\n      input {\r\n        @extend .input-style;\r\n        display: none;\r\n        width: 100%;\r\n        font-size: 1.4rem;\r\n      }\r\n      &.editing {\r\n        p {\r\n          display: none;\r\n        }\r\n        input {\r\n          display: block;\r\n        }\r\n      }\r\n    }\r\n    .setting-item-category {\r\n      flex-basis: 15%;\r\n      select {\r\n        @extend .input-style;\r\n        margin: 15px 10px;\r\n        max-width: 80px;\r\n      }\r\n    }\r\n    .setting-item-buttons {\r\n      flex-basis: 5%;\r\n\r\n      button {\r\n        padding: 0;\r\n        font-size: 2rem;\r\n        cursor: pointer;\r\n        &:hover {\r\n          color: $font-green;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n@media (min-width: 768px) {\r\n  .setting-add-area {\r\n    display: flex;\r\n    justify-content: center;\r\n    padding-top: 60px;\r\n    margin-top: 50px;\r\n    h2 {\r\n      margin-bottom: 20px;\r\n      font-size: 1.8rem;\r\n    }\r\n    input {\r\n      flex-grow: 1;\r\n      width: 50%;\r\n    }\r\n    select {\r\n      margin: 10px 10px 0 10px;\r\n    }\r\n  }\r\n  .setting-table {\r\n    h2 {\r\n      margin-bottom: 10px;\r\n      font-size: 1.8rem;\r\n    }\r\n    .setting-item-category {\r\n      margin-right: 20px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Subcategories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Subcategories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Subcategories.vue?vue&type=template&id=c96de8fc&\"\nimport script from \"./Subcategories.vue?vue&type=script&lang=js&\"\nexport * from \"./Subcategories.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Subcategories.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}