(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ccc2e55"],{7070:function(e,t,i){},c03b:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",[i("Banner",{attrs:{bannerImgURL:e.bannerImgURL}}),i("ToTop"),i("CartSimple",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],attrs:{"ori-cart-items":e.cartItems},on:{deleteCartItem:e.deleteCartItemHandler}}),i("PageTitle",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.isLoading?"":e.item.name)+" ")]},proxy:!0},{key:"buttons",fn:function(){return[i("div",{staticClass:"setting-links-wrapper"},[i("router-link",{staticClass:"title-link item-goback-btn",attrs:{to:"/"}},[e._v("回首頁")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"title-link item-star-btn active",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.changeLike(t)}}},[e._v(" "+e._s(e.item.isLiked?"移除星號":"加上星號")+" ")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"title-link item-edit-btn active",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toEditPage(t)}}},[e._v(" 編輯 ")]),e.item.isClosed?e._e():i("button",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"title-link",class:{active:!e.item.isInCart},attrs:{disabled:e.item.isInCart},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addToCart(t)}}},[e._v(" "+e._s(e.item.isInCart?"已加入暫定菜單":"加到暫定菜單中")+" ")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"title-link item-close-btn",class:{active:!e.item.isInCart},attrs:{disabled:e.item.isInCart},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeItem(t)}}},[e._v(" "+e._s(e.item.isClosed?"取消封存":"封存")+" ")])],1)]},proxy:!0}])}),i("div",{staticClass:"item-content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]},[i("loading",{attrs:{id:"loading-box",active:e.isLoading,"can-cancel":!0},on:{"update:active":function(t){e.isLoading=t}}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"container"},[e.item.isClosed?i("span",{staticClass:"title-closed"},[e._v("※ 此為封存項目")]):e._e(),i("div",{staticClass:"item-section one-line"},[i("h3",[e._v("運動類別：")]),i("pre",[e._v(e._s(e.item.Category.name))])]),i("div",{staticClass:"item-section"},[i("h3",[e._v("項目類型：")]),i("div",{staticClass:"item-subcategories-box"},e._l(e.item.Subcategories,(function(t){return i("span",{key:t.id},[e._v(e._s(t.name))])})),0)]),i("div",{staticClass:"item-section"},[i("h3",[e._v("描述：")]),i("pre",[e._v(e._s(e.item.description))])]),i("div",{staticClass:"item-section"},[i("h3",[e._v("限制：")]),i("pre",[e._v(e._s(e.item.limit))])]),e.item.image?i("div",{staticClass:"item-section"},[i("h3",[e._v("相關圖片：")]),i("div",{staticClass:"item-img"},[i("img",{attrs:{src:e.item.image,alt:""}})])]):e._e()])])],1)},a=[],s=(i("99af"),i("4de4"),i("caad"),i("b0c0"),i("2532"),i("5530")),n=(i("96cf"),i("1da1")),o=i("84af"),c=i("89dd"),m=i("a661"),u=i("0681"),d=i("2fa3"),l=i("ce50"),v=i("644d"),p={name:"PracticeItem",components:{Banner:o["a"],PageTitle:c["a"],ToTop:m["a"],CartSimple:u["a"]},data:function(){return{bannerImgURL:"https://i.imgur.com/I6qcJFI.jpg",cartItems:[],cartItemsArr:[],item:{id:void 0,name:void 0,limit:void 0,description:void 0,image:void 0,isClosed:!1,isLiked:!1,CategoryId:void 0,Category:{},Subcategories:[]},isLoading:!0}},created:function(){var e=this.$route.params.id;this.fetchItem(e)},methods:{fetchItem:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var r,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,l["a"].getItem({itemId:e});case 3:if(r=i.sent,a=r.data,n=r.statusText,"OK"===n){i.next=8;break}throw new Error;case 8:"error"===a.status&&(d["b"].fire({icon:"error",title:"無法取得項目資料，返回首頁"}),t.$router.push("/")),t.item=Object(s["a"])(Object(s["a"])({},a.item),{},{isInCart:a.cartItemsArr.includes(a.item.id)}),t.cartItems=a.cartItems,t.cartItemsArr=a.cartItemsArr,t.isLoading=!1,i.next=18;break;case 15:i.prev=15,i.t0=i["catch"](0),d["b"].fire({icon:"error",title:"目前暫時無法取得項目資料，請稍後再試"});case 18:case"end":return i.stop()}}),i,null,[[0,15]])})))()},changeLike:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i=e.item.id,t.next=4,l["a"].changeLike({itemId:i});case 4:if(r=t.sent,a=r.statusText,"OK"===a){t.next=8;break}throw new Error;case 8:e.item.isLiked?d["b"].fire({icon:"success",title:"成功移除星號"}):d["b"].fire({icon:"success",title:"成功加上星號"}),e.item.isLiked=!e.item.isLiked,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),d["b"].fire({icon:"error",title:"目前無法改變狀態，請稍後再試"});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},addToCart:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i=e.item.id,t.next=4,v["a"].addToCart({itemId:i});case 4:if(r=t.sent,a=r.data,n=r.statusText,"OK"===n){t.next=9;break}throw new Error;case 9:if("error"!==a.status){t.next=12;break}return d["b"].fire({icon:"error",title:a.message}),t.abrupt("return");case 12:e.item.isInCart=!0,d["b"].fire({icon:"success",title:"成功加入暫定菜單"}),e.cartItems.push(Object(s["a"])(Object(s["a"])({},a.data),{},{Item:e.item})),e.cartItemsArr.push(e.item.id),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),d["b"].fire({icon:"error",title:"暫時無法加入暫定菜單，請稍後再試"});case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))()},closeItem:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,r,a,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.item.isInCart){t.next=4;break}return d["b"].fire({icon:"error",title:"請先移除從暫定菜單移除此項目，再進行封存"}),t.abrupt("return");case 4:return i=e.item.isClosed?"取消封存":"封存",t.next=7,d["a"].fire({title:"確定要".concat(i,"「").concat(e.item.name,"」嗎？"),confirmButtonText:"確定"});case 7:if(r=t.sent,!r.isConfirmed){t.next=21;break}return a=e.item.id,t.next=12,l["a"].changeClosed({itemId:a});case 12:if(s=t.sent,n=s.data,o=s.statusText,"OK"===o){t.next=17;break}throw new Error;case 17:if("error"!==n.status){t.next=20;break}return d["b"].fire({icon:"error",title:n.message}),t.abrupt("return");case 20:e.item.isClosed=!e.item.isClosed;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](0),d["b"].fire({icon:"error",title:"目前無法改變項目狀態，請稍後再試"});case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()},deleteCartItemHandler:function(e){var t=e.cartId;this.item.isInCart=!1,this.cartItems=this.cartItems.filter((function(e){return e.id!==t}))},toEditPage:function(){this.$router.push("/items/".concat(this.item.id,"/edit"))}}},f=p,g=(i("de1e"),i("2877")),h=Object(g["a"])(f,r,a,!1,null,null,null);t["default"]=h.exports},de1e:function(e,t,i){"use strict";var r=i("7070"),a=i.n(r);a.a}}]);
//# sourceMappingURL=chunk-1ccc2e55.812f813f.js.map