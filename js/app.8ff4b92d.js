(function(e){function t(t){for(var a,n,c=t[0],o=t[1],l=t[2],u=0,d=[];u<c.length;u++)n=c[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var c=r[n];0!==i[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},i={app:0},s=[];function c(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-1ccc2e55":"5cef3735","chunk-2d0ccbf6":"6dfa6858","chunk-2d0e5f93":"9b0300d1","chunk-4a0d1f54":"80ab32e1","chunk-4adc9a15":"f5775e18","chunk-69313d06":"115553df","chunk-79310963":"6925712d","chunk-9e9c9b90":"5c5cdf13","chunk-0d0803c5":"26179ab0","chunk-16086b90":"c9f4df07","chunk-4cd7a25a":"3c02e153","chunk-d5d232e0":"65e8661a","chunk-2d2102cc":"b6653450","chunk-2d216ba2":"2468fd70"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r={"chunk-1ccc2e55":1,"chunk-4a0d1f54":1,"chunk-4adc9a15":1,"chunk-69313d06":1,"chunk-79310963":1,"chunk-0d0803c5":1,"chunk-16086b90":1,"chunk-4cd7a25a":1,"chunk-d5d232e0":1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+"."+{"chunk-1ccc2e55":"0a9baf6b","chunk-2d0ccbf6":"31d6cfe0","chunk-2d0e5f93":"31d6cfe0","chunk-4a0d1f54":"bf5afd30","chunk-4adc9a15":"4e5b375e","chunk-69313d06":"d266ed46","chunk-79310963":"b310a516","chunk-9e9c9b90":"31d6cfe0","chunk-0d0803c5":"8d19d021","chunk-16086b90":"4dcd82b9","chunk-4cd7a25a":"ce40f8f0","chunk-d5d232e0":"cc08095f","chunk-2d2102cc":"31d6cfe0","chunk-2d216ba2":"31d6cfe0"}[e]+".css",i=o.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var l=s[c],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===i))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){l=d[c],u=l.getAttribute("data-href");if(u===a||u===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete n[e],m.parentNode.removeChild(m),r(s)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){n[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,r){a=i[e]=[t,r]}));t.push(a[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=c(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var r=i[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",d.name="ChunkLoadError",d.type=a,d.request=n,r[1](d)}i[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/practice-list-vue/",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0681":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cart-simple"},[r("div",[r("loading",{attrs:{active:e.isAllProcessing},on:{"update:active":function(t){e.isAllProcessing=t}}})],1),r("label",{staticClass:"cart-simple-label",attrs:{for:"cart-simple-input"}},[r("font-awesome-icon",{attrs:{icon:"list-alt"}})],1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.isOpenCart,expression:"isOpenCart"}],staticClass:"cart-simple-input",attrs:{type:"checkbox",id:"cart-simple-input"},domProps:{checked:Array.isArray(e.isOpenCart)?e._i(e.isOpenCart,null)>-1:e.isOpenCart},on:{change:function(t){var r=e.isOpenCart,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&(e.isOpenCart=r.concat([i])):s>-1&&(e.isOpenCart=r.slice(0,s).concat(r.slice(s+1)))}else e.isOpenCart=n}}}),r("div",{staticClass:"card-simple-modal",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeCart(t)}}}),r("div",{staticClass:"cart-simple-content"},[r("h3",[e._v("暫定菜單")]),r("ul",{staticClass:"cart-simple-ul"},e._l(e.cartItems,(function(t){return r("li",{key:t.id,staticClass:"cart-simple-li"},[r("div",{staticClass:"cart-simple-title"},[r("router-link",{staticClass:"cart-simple-link",attrs:{to:{name:"practice-item",params:{id:t.Item.id}}}}),r("p",[e._v(e._s(t.Item.name))]),r("p",{staticClass:"cart-simple-category"},[e._v(" "+e._s(t.Item.Category.name)+" ")]),r("div",{staticClass:"cart-simple-subcategory"},[e._l(t.Item.Subcategories,(function(t){return r("span",{key:t.id},[e._v(e._s(t.name))])})),r("span",[e._v("123")])],2)],1),r("button",{staticClass:"cart-simple-button",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.deleteCartItem(t.id,t.ItemId,t.Item.name)}}},[e._v(" × ")])])})),0)])])},n=[],i=(r("96cf"),r("1da1")),s=r("2909"),c=r("644d"),o=r("2fa3"),l={name:"CartSimple",props:{oriCartItems:{type:Array}},data:function(){return{cartItems:this.oriCartItems,isOpenCart:!1,isAllProcessing:!1}},watch:{oriCartItems:function(e){this.cartItems=Object(s["a"])(e)}},methods:{deleteCartItem:function(e,t,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o["a"].fire({title:"確定要刪除暫定菜單中的  「".concat(r,"」嗎？"),confirmButtonText:"刪除"});case 3:if(i=n.sent,!i.isConfirmed){n.next=15;break}return a.isAllProcessing=!0,n.next=8,c["a"].deleteCartItem({cartId:e});case 8:if(s=n.sent,l=s.statusText,"OK"===l){n.next=12;break}throw new Error;case 12:o["b"].fire({icon:"success",title:"已成功刪除項目"}),a.$emit("deleteCartItem",{cartId:e,itemId:t}),a.isAllProcessing=!1;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n["catch"](0),a.isAllProcessing=!1,o["b"].fire({icon:"success",title:"目前無法刪除暫定菜單的項目，請稍後再試"});case 21:case"end":return n.stop()}}),n,null,[[0,17]])})))()},closeCart:function(){return this.isOpenCart=!1}}},u=l,d=(r("b9af"),r("2877")),m=Object(d["a"])(u,a,n,!1,null,null,null);t["a"]=m.exports},"16a3":function(e,t,r){"use strict";var a=r("cd8c"),n=r.n(a);n.a},"2fa3":function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return d}));r("d3b7");var a=r("bc3a"),n=r.n(a),i=r("3d20"),s=r.n(i),c="https://practice-list.herokuapp.com/api/practice",o=n.a.create({baseURL:c});o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var l=o,u=s.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3}),d=s.a.mixin({showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"取消"})},"307c":function(e,t,r){},"47c6":function(e,t,r){},"4ec3":function(e,t,r){"use strict";var a=r("72e0"),n=r.n(a);n.a},5003:function(e,t,r){"use strict";var a=r("ea14"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Navbar"),r("router-view")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("div",{staticClass:"logo"},[r("router-link",{attrs:{to:"/signin"}},[r("img",{attrs:{src:"https://i.imgur.com/3DfRKXD.png",alt:"logo"}})])],1),e.isAuthenticated?r("nav",{staticClass:"nav"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.isOpenNav,expression:"isOpenNav"}],staticClass:"nav-toggle",attrs:{type:"checkbox",id:"nav-toggle"},domProps:{checked:Array.isArray(e.isOpenNav)?e._i(e.isOpenNav,null)>-1:e.isOpenNav},on:{change:function(t){var r=e.isOpenNav,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&(e.isOpenNav=r.concat([i])):s>-1&&(e.isOpenNav=r.slice(0,s).concat(r.slice(s+1)))}else e.isOpenNav=n}}}),r("div",{staticClass:"nav-modal",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeNav(t)}}}),r("ul",{staticClass:"nav-list",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeNav(t)}}},[r("li",{staticClass:"nav-active"},[r("router-link",{attrs:{to:"/items"}},[e._v("訓練項目")])],1),r("li",[r("router-link",{attrs:{to:"/cart"}},[e._v("暫定菜單")])],1),r("li",[r("router-link",{attrs:{to:"/lists"}},[e._v("已排菜單")])],1),r("li",[r("router-link",{attrs:{to:"/setting"}},[e._v("類別設定")])],1),r("li",[r("router-link",{attrs:{to:"/howtouse"}},[e._v("使用說明")])],1),r("li",{staticClass:"logout"},[r("button",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.logout(t)}}},[e._v("登出")])])]),e._m(0)]):e._e()])},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"nav-toggle-label",attrs:{for:"nav-toggle"}},[r("span",{staticClass:"hamburger"})])}],o=r("5530"),l=r("2f62"),u={name:"Navbar",data:function(){return{isOpenNav:!1}},computed:Object(o["a"])({},Object(l["b"])(["currentUser","isAuthenticated"])),methods:{logout:function(){this.closeNav(),this.$store.commit("revokeAuthentication"),this.$router.push("/signin")},closeNav:function(){this.isOpenNav=!1}}},d=u,m=(r("16a3"),r("2877")),f=Object(m["a"])(d,s,c,!1,null,null,null),p=f.exports,g={components:{Navbar:p}},h=g,v=Object(m["a"])(h,n,i,!1,null,null,null),b=v.exports,k=(r("caad"),r("b0c0"),r("d3b7"),r("2532"),r("96cf"),r("1da1")),y=r("8c4f"),C=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",{staticClass:"not-found-text"},[e._v(" 404 Page Not Found ")])])}],I=(r("6fb9"),{}),_=Object(m["a"])(I,C,w,!1,null,null,null),x=_.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-area"},[r("BackgroundImg"),r("div",{staticClass:"container"},[r("form",{staticClass:"login-form",attrs:{action:"POST"},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.submitHandler(t)}}},[r("h1",[e._v("登入")]),r("div",{staticClass:"form-item"},[r("div",{staticClass:"form-input"},[r("label",{attrs:{for:"name"}},[e._v("信箱：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"name",required:"",autocomplete:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("div",{staticClass:"form-input"},[r("label",{attrs:{for:"password"}},[e._v("密碼：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:"",autocomplete:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),r("div",{staticClass:"form-buttons"},[r("button",{staticClass:"form-button nomal-login",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.loginMsg)+" ")])]),r("p",{staticClass:"form-text"},[e._v(" 沒有帳號？ "),r("router-link",{attrs:{to:"signup"}},[e._v("點此註冊")])],1),r("p",{staticClass:"form-text "},[e._v(" 該怎麼使用？"),r("router-link",{attrs:{to:"/howtouse"}},[e._v("介紹")])],1)])])],1)},A=[],O=r("8005"),S=r("2fa3"),T=r("afb4"),L={name:"signIn",components:{BackgroundImg:T["a"]},data:function(){return{email:"",password:"",isProcessing:!1,loginMsg:"登入"}},methods:{submitHandler:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.email&&e.password){t.next=3;break}throw new Error;case 3:return e.isProcessing=!0,e.loginMsg="驗證中",t.next=7,O["a"].signIn({email:e.email,password:e.password});case 7:if(r=t.sent,a=r.data,"success"===a.status){t.next=11;break}throw new Error(a.message);case 11:return t.next=13,localStorage.setItem("token",a.token);case 13:e.$store.commit("setCurrentUser",a.user),e.$router.push("/"),t.next=23;break;case 17:t.prev=17,t.t0=t["catch"](0),e.password="",e.isProcessing=!1,e.loginMsg="登入",S["b"].fire({icon:"error",title:"請確認是否輸入了正確的帳號與密碼"});case 23:case"end":return t.stop()}}),t,null,[[0,17]])})))()}}},B=L,j=(r("bff1"),Object(m["a"])(B,P,A,!1,null,null,null)),N=j.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("Banner",{attrs:{bannerImgURL:e.bannerImgURL}}),r("ToTop"),r("CartSimple",{directives:[{name:"show",rawName:"v-show",value:!e.isItemsLoading,expression:"!isItemsLoading"}],attrs:{"ori-cart-items":e.cartItems},on:{deleteCartItem:e.deleteCartItemHandler}}),r("PageTitle",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" 訓練項目 ")]},proxy:!0},{key:"buttons",fn:function(){return[r("div",{staticClass:"setting-links-wrapper"},[r("router-link",{staticClass:"title-link add-card-link active",attrs:{to:"/items/create"}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v("新增項目")],1),r("router-link",{staticClass:"title-link close-card-link active",attrs:{to:"/items/close"}},[e._v("查看封存項目")])],1)]},proxy:!0}])}),r("searchBar",{attrs:{"ori-categories":e.categories,"ori-subcategories":e.subcategories,"ori-items":e.items,"ori-items-filter":e.itemsFilter,"is-type-loading":e.isTypeLoading,"ori-is-bullet":e.isBullet},on:{filterCards:e.filterCardsHandler,changeBullet:e.changeBulletHandler}}),r("PracticeCards",{attrs:{"ori-items-filter":e.itemsFilter,isCloseType:!1,"is-items-loading":e.isItemsLoading,"is-bullet":e.isBullet},on:{addToCart:e.addToCartHandler,changeLike:e.changeLikeHandler,changeClosed:e.changeClosedHandler}})],1)},F=[],R=(r("4de4"),r("d81d"),r("b85c")),$=r("84af"),U=r("89dd"),D=r("a661"),H=r("0681"),K=r("648a"),M=r("823d"),q=r("a240"),J=r("ce50"),V={name:"Index",components:{Banner:$["a"],PageTitle:U["a"],ToTop:D["a"],CartSimple:H["a"],PracticeCards:K["a"],searchBar:M["a"]},data:function(){return{isItemsLoading:!0,isTypeLoading:!0,isBullet:!1,bannerImgURL:"https://i.imgur.com/VsqTokV.jpg",items:void 0,itemsFilter:[],cartItems:void 0,cartItemsArr:void 0,categories:void 0,subcategories:void 0}},created:function(){this.fetchType(),this.fetchItems()},methods:{fetchType:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q["a"].getSubcategory();case 3:if(r=t.sent,a=r.data,n=r.statusText,"OK"===n){t.next=8;break}throw new Error;case 8:e.subcategories=a.subcategories,e.categories=a.categories,e.isTypeLoading=!1,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),S["b"].fire({icon:"error",title:"無法取得運動項目與項目種類資料，請稍後再試"});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},fetchItems:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J["a"].getItems();case 3:if(r=t.sent,a=r.data,n=r.statusText,"OK"===n){t.next=8;break}throw new Error;case 8:i=a.items.map((function(e){var t,r=[],n=Object(R["a"])(e.Subcategories);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push(i.id)}}catch(s){n.e(s)}finally{n.f()}return Object(o["a"])(Object(o["a"])({},e),{},{isInCart:a.cartItemsArr.includes(e.id),subcategoriesArr:r})})),e.items=i,e.itemsFilter=i,e.cartItems=a.cartItems,e.cartItemsArr=a.cartItemsArr,e.isItemsLoading=!1,t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),S["b"].fire({icon:"error",title:"無法取得項目資料，請稍後再試"});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},addToCartHandler:function(e){var t=e.cartItem,r=e.itemId;this.cartItems.push(t),this.items.map((function(e){e.id===r&&(e.isInCart=!0)})),this.itemsFilter.map((function(e){e.id===r&&(e.isInCart=!0)}))},changeLikeHandler:function(e){this.items.map((function(t){t.id===e&&(t.isLiked?S["b"].fire({icon:"success",title:"成功移除星號"}):S["b"].fire({icon:"success",title:"成功加上星號"}),t.isLiked=!t.isLiked)}))},deleteCartItemHandler:function(e){var t=e.cartId,r=e.itemId;this.items.map((function(e){e.id===r&&(e.isInCart=!1)})),this.itemsFilter.map((function(e){e.id===r&&(e.isInCart=!1)})),this.cartItems=this.cartItems.filter((function(e){return e.id!==t}))},changeClosedHandler:function(e){this.items=this.items.filter((function(t){return t.id!==e})),this.itemsFilter=this.itemsFilter.filter((function(t){return t.id!==e}))},filterCardsHandler:function(e){this.itemsFilter=e},changeBulletHandler:function(e){this.isBullet=e}}},z=V,X=Object(m["a"])(z,E,F,!1,null,null,null),G=X.exports,Q={getCurrentUser:function(){return S["c"].get("/users/current")}};a["a"].use(l["a"]);var W=new l["a"].Store({state:{currentUser:{id:void 0,name:void 0,email:void 0},isAuthenticated:!1,token:void 0},mutations:{setCurrentUser:function(e,t){e.currentUser=Object(o["a"])(Object(o["a"])({},e.currentUser),t),e.isAuthenticated=!0,e.token=localStorage.getItem("token")},revokeAuthentication:function(e){e.currentUser={},e.isAuthenticated=!1,e.token="",localStorage.removeItem("token")}},actions:{fetchCurrentUser:function(e){return Object(k["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,s,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Q.getCurrentUser();case 4:if(a=t.sent,n=a.data,i=a.statusText,"OK"===i){t.next=9;break}throw new Error;case 9:return s=n.id,c=n.name,o=n.email,r("setCurrentUser",{id:s,name:c,email:o}),t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t["catch"](1),S["b"].fire({icon:"error",title:"無法獲取使用者資料，請重新再試"}),r("revokeAuthentication"),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))()}},modules:{}});a["a"].use(y["a"]);var Y=[{path:"/",name:"root",redirect:"/items"},{path:"/items",name:"practice-index",component:G},{path:"/signin",name:"sign-in",component:N},{path:"/signup",name:"sign-up",component:function(){return r.e("chunk-69313d06").then(r.bind(null,"5c9c"))}},{path:"/items/close",name:"item-close",component:function(){return r.e("chunk-2d0e5f93").then(r.bind(null,"9787"))}},{path:"/items/:id/edit",name:"edit-item",component:function(){return Promise.all([r.e("chunk-9e9c9b90"),r.e("chunk-0d0803c5")]).then(r.bind(null,"4047"))}},{path:"/items/:id(\\d+)",name:"practice-item",component:function(){return r.e("chunk-1ccc2e55").then(r.bind(null,"c03b"))}},{path:"/items/create",name:"create-item",component:function(){return Promise.all([r.e("chunk-9e9c9b90"),r.e("chunk-16086b90")]).then(r.bind(null,"1afd"))}},{path:"/setting",component:function(){return r.e("chunk-2d0ccbf6").then(r.bind(null,"4ef5"))},children:[{path:"",redirect:"/setting/subcategories"},{path:"categories",component:function(){return r.e("chunk-4adc9a15").then(r.bind(null,"1d9f"))}},{path:"subcategories",component:function(){return r.e("chunk-4a0d1f54").then(r.bind(null,"6b6f"))}}]},{path:"/cart",name:"carts",component:function(){return Promise.all([r.e("chunk-9e9c9b90"),r.e("chunk-d5d232e0"),r.e("chunk-2d2102cc")]).then(r.bind(null,"b789"))}},{path:"/lists",name:"lists",component:function(){return Promise.all([r.e("chunk-9e9c9b90"),r.e("chunk-4cd7a25a")]).then(r.bind(null,"ef9d"))}},{path:"/lists/:id(\\d+)",name:"list",component:function(){return Promise.all([r.e("chunk-9e9c9b90"),r.e("chunk-d5d232e0"),r.e("chunk-2d216ba2")]).then(r.bind(null,"c461"))}},{path:"/howtouse",name:"how-to-use",component:function(){return r.e("chunk-79310963").then(r.bind(null,"65cc"))}},{path:"*",name:"not-found",component:x}],Z=new y["a"]({routes:Y});Z.beforeEach(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,r,a){var n,i,s,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("token"),i=W.state.token,s=W.state.isAuthenticated,!n||n===i){e.next=7;break}return e.next=6,W.dispatch("fetchCurrentUser");case 6:s=e.sent;case 7:if(c=["how-to-use"],o=["sign-up","sign-in"],!c.includes(t.name)){e.next=12;break}return a(),e.abrupt("return");case 12:if(s||o.includes(t.name)){e.next=15;break}return a("/signin"),e.abrupt("return");case 15:if(!s||!o.includes(t.name)){e.next=18;break}return a("/items"),e.abrupt("return");case 18:a();case 19:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}());var ee=Z,te=r("ecee"),re=r("c074"),ae=r("ad3d"),ne=r("9062"),ie=r.n(ne);r("e40d");te["c"].add(re["e"],re["a"],re["d"],re["f"],re["b"],re["c"]),a["a"].component("font-awesome-icon",ae["a"]),a["a"].component("Loading",ie.a),a["a"].config.productionTip=!1,new a["a"]({router:ee,store:W,render:function(e){return e(b)}}).$mount("#app")},"61ab":function(e,t,r){},"644d":function(e,t,r){"use strict";r("b0c0");var a=r("2fa3");t["a"]={getCart:function(){return a["c"].get("/cart")},addToCart:function(e){var t=e.itemId;return a["c"].post("/cart/".concat(t),null)},deleteCartItem:function(e){var t=e.cartId;return a["c"].delete("/cart/".concat(t))},putCartItem:function(e){var t=e.updateItems;return a["c"].put("/cart/edit",{updateItems:t})},submitCart:function(e){var t=e.updateItems,r=e.name;return a["c"].post("/lists",{updateItems:t,name:r})}}},"648a":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cards",class:{close:e.isCloseType}},[r("div",[r("loading",{attrs:{active:e.isAllProcessing},on:{"update:active":function(t){e.isAllProcessing=t}}})],1),r("div",[r("loading",{attrs:{id:"loading-box",active:e.isItemsLoading,"can-cancel":!0},on:{"update:active":function(t){e.isItemsLoading=t}}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isItemsLoading,expression:"!isItemsLoading"}],staticClass:"container"},[r("h2",{staticClass:"cards-num"},[e._v("共有 "+e._s(e.oriItemsFilter.length)+" 個結果")]),r("div",{staticClass:"cards-wrapper",class:{bullet:e.isBullet}},e._l(e.itemsFilter,(function(t){return r("div",{key:t.id,staticClass:"card"},[r("div",{staticClass:"card-header"},[r("router-link",{staticClass:"card-link",attrs:{to:{name:"practice-item",params:{id:t.id}}}}),r("span",{staticClass:"card-category"},[e._v(e._s(t.Category.name))]),e.isCloseType?e._e():r("div",{staticClass:"card-star",class:{active:t.isLiked},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.changeLike(t.id)}}},[r("font-awesome-icon",{attrs:{icon:"star"}})],1),r("img",{attrs:{src:t.image?t.image:e.defaultImgURL,alt:"card-img"}}),r("div",{staticClass:"card-title"},[r("h3",[e._v(e._s(t.name))]),r("div",{staticClass:"card-sub-categories"},e._l(t.Subcategories,(function(t){return r("span",{key:t.id},[e._v(e._s(t.name))])})),0)])],1),r("div",{staticClass:"card-footer",class:{close:e.isCloseType}},[r("button",{staticClass:"card-close-button",class:{active:!t.isInCart},attrs:{disabled:t.isInCart},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.changeClosed(t.id,t.isClosed,t.name)}}},[e._v(" "+e._s(e.isCloseType?"取消封存":"封存")+" ")]),r("button",{staticClass:"card-edit-button active",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.toEditPage(t.id)}}},[e._v(" 編輯 ")]),e.isCloseType?e._e():r("button",{staticClass:"card-cart-button",class:{active:!t.isInCart},attrs:{disabled:t.isInCart},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.addToCart(t)}}},[e._v(" "+e._s(t.isInCart?"已加入暫定菜單":"加到暫定菜單中")+" ")])])])})),0)])])},n=[],i=(r("99af"),r("2909")),s=r("5530"),c=(r("96cf"),r("1da1")),o=r("644d"),l=r("ce50"),u=r("2fa3"),d={name:"PracticeCards",props:{oriItemsFilter:{type:Array},isCloseType:{type:Boolean},isItemsLoading:{type:Boolean},isBullet:{type:Boolean}},data:function(){return{isAllProcessing:!1,itemsFilter:this.oriItemsFilter,defaultImgURL:"https://github.com/wanglala5131/practice-list-vue/blob/main/src/assets/img/no-img.png?raw=true"}},methods:{addToCart:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n,i,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isAllProcessing=!0,a=e.id,r.next=5,o["a"].addToCart({itemId:a});case 5:if(n=r.sent,i=n.data,c=n.statusText,"OK"===c){r.next=10;break}throw new Error;case 10:if("error"!==i.status){r.next=14;break}return u["b"].fire({icon:"error",title:i.message}),t.isAllProcessing=!1,r.abrupt("return");case 14:u["b"].fire({icon:"success",title:"已成功加入暫定菜單"}),l=Object(s["a"])(Object(s["a"])({},i.data),{},{Item:e}),t.$emit("addToCart",{cartItem:l,itemId:a}),t.isAllProcessing=!1,r.next=24;break;case 20:r.prev=20,r.t0=r["catch"](0),t.isAllProcessing=!1,u["b"].fire({icon:"error",title:"目前無法加入暫定菜單，請稍後再試"});case 24:case"end":return r.stop()}}),r,null,[[0,20]])})))()},changeLike:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isAllProcessing=!0,r.next=4,l["a"].changeLike({itemId:e});case 4:if(a=r.sent,n=a.data,i=a.statusText,"OK"===i){r.next=9;break}throw new Error;case 9:if("error"!==n.status){r.next=13;break}return u["b"].fire({icon:"error",title:n.message}),t.isAllProcessing=!1,r.abrupt("return");case 13:t.$emit("changeLike",e),t.isAllProcessing=!1,r.next=21;break;case 17:r.prev=17,r.t0=r["catch"](0),t.isAllProcessing=!1,u["b"].fire({icon:"error",title:"目前無法修改項目星號，請稍後再試"});case 21:case"end":return r.stop()}}),r,null,[[0,17]])})))()},changeClosed:function(e,t,r){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i,s,c,o,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i=t?"取消封存":"封存",n.next=4,u["a"].fire({title:"要".concat(i,"「").concat(r,"」嗎？"),confirmButtonText:"確定"});case 4:if(s=n.sent,!s.isConfirmed){n.next=20;break}return a.isAllProcessing=!0,n.next=9,l["a"].changeClosed({itemId:e});case 9:if(c=n.sent,o=c.data,d=c.statusText,"OK"===d){n.next=14;break}throw new Error;case 14:if("error"!==o.status){n.next=18;break}return u["b"].fire({icon:"error",title:o.message}),a.isAllProcessing=!1,n.abrupt("return");case 18:a.$emit("changeClosed",e),a.isAllProcessing=!1;case 20:n.next=26;break;case 22:n.prev=22,n.t0=n["catch"](0),a.isAllProcessing=!1,u["b"].fire({icon:"error",title:"目前無法改變項目狀態，請稍後再試"});case 26:case"end":return n.stop()}}),n,null,[[0,22]])})))()},toEditPage:function(e){this.$router.push("/items/".concat(e,"/edit"))}},watch:{oriItemsFilter:function(e){this.itemsFilter=Object(i["a"])(e)}}},m=d,f=(r("8124"),r("2877")),p=Object(f["a"])(m,a,n,!1,null,null,null);t["a"]=p.exports},"6fb9":function(e,t,r){"use strict";var a=r("61ab"),n=r.n(a);n.a},"72e0":function(e,t,r){},8005:function(e,t,r){"use strict";r("b0c0");var a=r("2fa3");t["a"]={signIn:function(e){var t=e.email,r=e.password;return a["c"].post("/signin",{email:t,password:r})},signUp:function(e){var t=e.name,r=e.email,n=e.password,i=e.confirmPassword;return a["c"].post("/signup",{name:t,email:r,password:n,confirmPassword:i})}}},8124:function(e,t,r){"use strict";var a=r("bc92"),n=r.n(a);n.a},"816f":function(e,t,r){},"823d":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cards-search",class:{list:"listModal"===e.searchPosition}},[r("div",{staticClass:"container"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchToggle,expression:"searchToggle"}],staticClass:"cards-search-toggle",attrs:{type:"checkbox",id:"cards-search-toggle"},domProps:{checked:Array.isArray(e.searchToggle)?e._i(e.searchToggle,null)>-1:e.searchToggle},on:{change:function(t){var r=e.searchToggle,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&(e.searchToggle=r.concat([i])):s>-1&&(e.searchToggle=r.slice(0,s).concat(r.slice(s+1)))}else e.searchToggle=n}}}),r("label",{staticClass:"cards-search-toggle-label",attrs:{for:"cards-search-toggle"}},[e._v(e._s(e.searchToggle?"收起篩選列":"打開篩選列"))]),r("div",{staticClass:"cards-search-form"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isTypeLoading,expression:"isTypeLoading"}]},[r("loading",{attrs:{id:"loading-box",active:e.isTypeLoading,"can-cancel":!0,"is-full-page":!1},on:{"update:active":function(t){e.isTypeLoading=t}}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTypeLoading,expression:"!isTypeLoading"}]},[r("div",{staticClass:"search-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"keyword",attrs:{type:"text",placeholder:"搜尋關鍵字",id:"keyword",name:"keyword"},domProps:{value:e.keyword},on:{input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.filterCards]}})]),r("div",{staticClass:"search-item"},[r("div",{staticClass:"search-item choice"},[r("div",{staticClass:"search-star"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.isLiked,expression:"isLiked"}],staticClass:"like",attrs:{type:"checkbox",name:"like",id:"like"},domProps:{checked:Array.isArray(e.isLiked)?e._i(e.isLiked,null)>-1:e.isLiked},on:{change:[function(t){var r=e.isLiked,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&(e.isLiked=r.concat([i])):s>-1&&(e.isLiked=r.slice(0,s).concat(r.slice(s+1)))}else e.isLiked=n},e.filterCards]}}),r("label",{attrs:{for:"like"}},[e._v("只顯示星號項目")])]),r("div",{staticClass:"search-bullet"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.isBullet,expression:"isBullet"}],staticClass:"bullet",attrs:{type:"checkbox",name:"bullet",id:"bullet"},domProps:{checked:Array.isArray(e.isBullet)?e._i(e.isBullet,null)>-1:e.isBullet},on:{change:[function(t){var r=e.isBullet,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&(e.isBullet=r.concat([i])):s>-1&&(e.isBullet=r.slice(0,s).concat(r.slice(s+1)))}else e.isBullet=n},e.changeBullet]}}),e.searchPosition?e._e():r("label",{attrs:{for:"bullet"}},[e._v("不顯示圖片")])])])]),r("div",{staticClass:"search-item category"},[r("span",{attrs:{for:"category"}},[e._v("運動類別")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.categorySelect,expression:"categorySelect"}],attrs:{name:"category",id:"category"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.categorySelect=t.target.multiple?r:r[0]},e.filterSubcategory]}},[r("option",{attrs:{value:"all",selected:"selected"}},[e._v("全部")]),e._l(e.categories,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),r("div",{directives:[{name:"show",rawName:"v-show",value:"all"!==e.categorySelect,expression:"categorySelect !== 'all'"}],staticClass:"search-item subcategory"},[r("span",[e._v("項目類型")]),r("div",{staticClass:"subcategory-controller"},[r("div",{staticClass:"subcategory-controller-item"},[r("button",{staticClass:"subcategory-controller-button",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.clearSubcategory(t)}}},[e._v(" 全不選 ")])]),r("div",{staticClass:"subcategory-controller-item"},[r("button",{staticClass:"subcategory-controller-button",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.allSubcategory(t)}}},[e._v(" 全選 ")])])]),r("div",{staticClass:"subcategory-items"},e._l(e.subcategoryFilter,(function(t){return r("div",{key:t.id,staticClass:"check-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.subcategorySelect,expression:"subcategorySelect"}],staticClass:"subcategory",attrs:{type:"checkbox",id:e.labelIndex(t.id)},domProps:{value:t.id,checked:Array.isArray(e.subcategorySelect)?e._i(e.subcategorySelect,t.id)>-1:e.subcategorySelect},on:{change:[function(r){var a=e.subcategorySelect,n=r.target,i=!!n.checked;if(Array.isArray(a)){var s=t.id,c=e._i(a,s);n.checked?c<0&&(e.subcategorySelect=a.concat([s])):c>-1&&(e.subcategorySelect=a.slice(0,c).concat(a.slice(c+1)))}else e.subcategorySelect=i},e.filterCards]}}),r("label",{attrs:{for:e.labelIndex(t.id)}},[e._v(e._s(t.name))])])})),0)])])])])])},n=[],i=(r("4de4"),r("caad"),r("d81d"),r("45fc"),r("b0c0"),r("2532"),{name:"searchBar",data:function(){return{items:[],itemsFilter:[],categories:[],subcategories:[],searchToggle:!1,keyword:"",isLiked:!1,isBullet:!1,categorySelect:"all",subcategorySelect:void 0,subcategoryFilter:void 0}},props:{oriCategories:{type:Array},oriSubcategories:{type:Array},oriItems:{type:Array},oriItemsFilter:{type:Array},searchPosition:{type:String},isTypeLoading:{type:Boolean},oriIsBullet:{type:Boolean}},methods:{filterSubcategory:function(){var e=this;"all"===this.categorySelect?(this.subcategorySelect=[],this.subcategories.map((function(t){e.subcategorySelect.push(t.id)}))):(this.subcategorySelect=[],this.subcategoryFilter=this.subcategories.filter((function(t){return t.CategoryId===e.categorySelect})),this.allSubcategory()),this.filterCards()},labelIndex:function(e){return"subcategory-".concat(e)},filterCards:function(){var e=this;this.itemsFilter=this.items,this.isLiked&&(this.itemsFilter=this.itemsFilter.filter((function(e){return e.isLiked}))),this.keyword&&(this.itemsFilter=this.itemsFilter.filter((function(t){return t.name.includes(e.keyword)}))),this.subcategorySelect&&(this.itemsFilter=this.itemsFilter.filter((function(t){return t.subcategoriesArr.some((function(t){return e.subcategorySelect.includes(t)}))}))),this.$emit("filterCards",this.itemsFilter)},clearSubcategory:function(){this.subcategorySelect=[],this.itemsFilter=[],this.filterCards()},allSubcategory:function(){var e=this;this.subcategorySelect=[],this.subcategories.map((function(t){t.CategoryId!==e.categorySelect||e.subcategorySelect.push(t.id)})),this.filterCards()},changeBullet:function(){this.$emit("changeBullet",this.isBullet)}},watch:{oriCategories:function(e){this.categories=e},oriSubcategories:function(e){this.subcategories=e},oriItems:function(e){this.items=e},oriItemsFilter:function(e){this.itemsFilter=e},oriIsBullet:function(e){this.isBullet=e}}}),s=i,c=(r("4ec3"),r("2877")),o=Object(c["a"])(s,a,n,!1,null,null,null);t["a"]=o.exports},"84af":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"banner",style:{backgroundImage:"url("+e.bannerImgURL+")"}})},n=[],i={name:"Banner",props:{bannerImgURL:{type:String}}},s=i,c=(r("f4e2"),r("2877")),o=Object(c["a"])(s,a,n,!1,null,null,null);t["a"]=o.exports},"84fb":function(e,t,r){},"89dd":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container title-box"},[r("h1",{staticClass:"page-title"},[e._t("title")],2),r("div",{staticClass:"card-page-links"},[e._t("buttons")],2)])},n=[],i=(r("d987"),r("2877")),s={},c=Object(i["a"])(s,a,n,!1,null,null,null);t["a"]=c.exports},"99d0":function(e,t,r){},a240:function(e,t,r){"use strict";r("b0c0");var a=r("2fa3");t["a"]={getSubcategory:function(){return a["c"].get("/setting/subcategories")},putSubcategory:function(e){var t=e.value,r=e.id;return a["c"].put("/setting/subcategories/".concat(r),{value:t})},addSubcategory:function(e){var t=e.name,r=e.CategoryId;return a["c"].post("setting/subcategories",{name:t,CategoryId:r})},deleteSubcategory:function(e){var t=e.id;return a["c"].delete("setting/subcategories/".concat(t))},getCategory:function(){return a["c"].get("/setting/categories")},addCategory:function(e){var t=e.name;return a["c"].post("setting/categories",{name:t})},putCategory:function(e){var t=e.name,r=e.id;return a["c"].put("setting/categories/".concat(r),{name:t})},deleteCategory:function(e){var t=e.id;return a["c"].delete("setting/categories/".concat(t))}}},a661:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"to-top"},[r("a",{attrs:{href:"#"}},[r("font-awesome-icon",{attrs:{icon:"arrow-up"}})],1)])},n=[],i=(r("5003"),r("2877")),s={},c=Object(i["a"])(s,a,n,!1,null,null,null);t["a"]=c.exports},afb4:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg-img"})},n=[],i=(r("ddfe"),r("2877")),s={},c=Object(i["a"])(s,a,n,!1,null,null,null);t["a"]=c.exports},b9af:function(e,t,r){"use strict";var a=r("307c"),n=r.n(a);n.a},bc92:function(e,t,r){},bff1:function(e,t,r){"use strict";var a=r("816f"),n=r.n(a);n.a},cd8c:function(e,t,r){},ce50:function(e,t,r){"use strict";var a=r("2fa3");t["a"]={getItems:function(){return a["c"].get("/")},getCloseItems:function(){return a["c"].get("/items/close")},getItem:function(e){var t=e.itemId;return a["c"].get("/items/".concat(t))},changeLike:function(e){var t=e.itemId;return a["c"].patch("/items/like/".concat(t),null)},changeClosed:function(e){var t=e.itemId;return a["c"].patch("/items/".concat(t,"/close"),null)},addItem:function(e){var t=e.formData;return a["c"].post("/items",t)},putItem:function(e){var t=e.itemId,r=e.formData;return a["c"].put("/items/".concat(t),r)},deleteItemImage:function(e){var t=e.itemId;return a["c"].patch("items/".concat(t,"/image"),null)}}},d987:function(e,t,r){"use strict";var a=r("84fb"),n=r.n(a);n.a},ddfe:function(e,t,r){"use strict";var a=r("47c6"),n=r.n(a);n.a},ea14:function(e,t,r){},f4e2:function(e,t,r){"use strict";var a=r("99d0"),n=r.n(a);n.a}});
//# sourceMappingURL=app.8ff4b92d.js.map